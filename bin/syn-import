#!/bin/bash
# to import a package
# with the template files
# and such

TEMPLATE_SYN_DIR="/usr/share/syn/synd"

pkg=$2
pid=`basename $1`
pkgname_guess=`basename $pkg | sed s/-.*//g`
pkgvers_guess=`basename $pkg | sed s/.*-//g`

pop=`pwd`
cd `dirname $1`
dirski=`pwd`
cd $pop

echo "Importing from $pid"
echo "Name: $pkgname_guess"
echo "Ver:  $pkgvers_guess"
echo ""
echo "Hit enter to import."
echo ""

read FOO

mkdir $pkg
cd $pkg
mkdir $pkg
cd $pkg

cp $dirski/$pid .

mkdir synd
cd synd
cp $TEMPLATE_SYN_DIR/* .
cat $TEMPLATE_SYN_DIR/meta | sed s/{PKG}/$pid/g | \
	sed s/{PKGNAME}/$pkgname_guess/g | \
	sed s/{PKGVER}/$pkgvers_guess/g > meta

echo ""
echo "Syn files pushed in and configured as much as I can do."
echo "Please edit meta and buildrc before you do anything."
echo ""

